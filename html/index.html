<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>16-Segment Control</title>
    <!-- Load Blockly core -->
    <script src="./blockly/blockly_compressed.js"></script>
    <!-- Load the default blocks -->
    <script src="./blockly/blocks_compressed.js"></script>
    <!-- Load a generators -->
    <script src="./blockly/javascript_compressed.js"></script>
    <!-- Load a message file -->
    <script src="./blockly/msg/en.js"></script>

    <script src="led16_segment_blocks.js"></script>
    <script src="led_control.js"></script>
</head>
<body>
<div id="toolbox"></div>
<div id="blocklyDiv" style="height: 80cqh; width: 95cqw;"></div>
<div id="displayDiv" style="height: 15cqh; width: 95cqw;">
    <embed type="image/svg+xml" id="digit0" style="height: 10cqh; width: 7cqw">
    <embed type="image/svg+xml" id="digit1" style="height: 10cqh; width: 7cqw">
    <embed type="image/svg+xml" id="digit2" style="height: 10cqh; width: 7cqw">
    <embed type="image/svg+xml" id="digit3" style="height: 10cqh; width: 7cqw">
</div>
</body>
<script>
    const config = {
        grid:
            {
                spacing: 20,
                length: 3,
                colour: "#ccc",
                snap: true
            },
        oneBasedIndex: false,
        sounds: false,
        toolbox: toolbox,
        zoom: {controls: true}

    };
    const workspace = Blockly.inject("blocklyDiv", config);
    workspace.addChangeListener(function (event) {
            if (event.type === Blockly.Events.BLOCK_CHANGE)
                eval(javascript.javascriptGenerator.workspaceToCode(workspace))
        }
    )
    //todo display stuff led
    //todo save/restore
    document.getElementById("digit0").src = led16Svg
    document.getElementById("digit1").src = led16Svg
    document.getElementById("digit2").src = led16Svg
    document.getElementById("digit3").src = led16Svg
</script>

</html>